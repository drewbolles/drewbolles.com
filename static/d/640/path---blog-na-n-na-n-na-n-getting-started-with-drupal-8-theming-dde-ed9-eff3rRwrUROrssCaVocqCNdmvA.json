{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog","author":"Kyle Mathews"}},"markdownRemark":{"id":"d9be67ff-c90c-5789-8a91-cbd3a5c14438","excerpt":"Now that we have a (relatively) stable version of Drupal 8 released, I want to post some of my adventures in the new theming system. In this…","html":"<p>Now that we have a (relatively) stable version of Drupal 8 released, I want to post some of my adventures in the new theming system. In this post I’ll cover what it looks like to create a custom theme from scratch and some Drupal 7 to 8 adjustments.</p>\n<h2>Requirements</h2>\n<ul>\n<li>Local Drupal 8 installation</li>\n<li>Custom theming knowledge</li>\n<li>That’s it!</li>\n</ul>\n<h2>Getting started</h2>\n<p>The first thing I always do when starting a theme from scratch is create a folder and an .info file. Different from Drupal 7, your themes live in <code class=\"language-text\">/themes</code> instead of <code class=\"language-text\">/sites/all/themes</code>. You can create a new theme folder like so:</p>\n<p>{% highlight sh linenos %}\n$ cd /path/to/d8/site\n$ mkdir [MY_THEME]\n$ touch [MY_THEME]/[MY_THEME].theme\n$ echo “name: My Theme” > [MY_THEME]/[MY_THEME].info.yml\n{% endhighlight %}</p>\n<p>Where [MY_THEME] is the name of your custom theme. This creates the folder and the first line of your info file. Notice your info files are now written in YAML, ‘info.yml’ instead of just ‘.info’.</p>\n<p>Other than a name, you’ll want a few other info variables set. These are ‘type’, ‘base theme’, ‘description’, ‘version’, and ‘core’. An example of a complete info file is below.</p>\n<p>{% highlight yaml startinline=true linenos %}\nname: My Theme\ntype: theme\nbase theme: classy\ndescription: ‘A custom Drupal 8 Theme built by yours truly’\nversion: 8.0.0\ncore: 8.x\n{% endhighlight %}</p>\n<p>Now our theme can be found in the ‘Appearance section’. Go ahead and ‘enable and set to default’. Our site should look pretty blank, but success!</p>\n<h2>Enabling local development services</h2>\n<p>Part of the strength of Drupal 8 is to provide configuration specific to your local environment. If you notice in your <code class=\"language-text\">/sites</code> folder there is an <code class=\"language-text\">example.settings.local.php</code>. You can duplicate this file to <code class=\"language-text\">/sites/default/settings.local.php</code>. Make sure to not commit it to your repo. This will allow you to set local database and site configuration that won’t affect the server.</p>\n<p>Part of this file also activates the development services found at <code class=\"language-text\">/sites/development.services.yml</code>. In this file, you can enable Twig debug among other things.</p>\n<h2>Using Classy</h2>\n<p>One line you should notice in our theme yaml file is the ‘base theme: classy’. Unlike in Drupal 7, core ships with a very well built base theme that should serve as a great foundation to a custom theme. You can also use ‘base theme: stable’ but I’ve not found that necessary. Do not set ‘base theme: false’.</p>\n<p>To override classy templates, simply copy and paste them into your custom theme. An example is the basic page template. You’ll want to copy /core/themes/classy/templates/layout/page.html.twig to /themes/[MY_THEME]/templates/layout/page.html.twig. This will allow you to override the page template without adjust the core one.</p>\n<h2>Creating and using Libraries</h2>\n<p>Another super powerful area of Drupal 8 is the new libraries abstractions. CSS and JS assets are now grouped as libraries and can be added / removed under any number of conditions. To create a base library for your theme, you’ll first need another yaml file. You’ll want to create [MY_THEME].libraries.yml and place it in your theme root. This file will house the collection of libraries used in your theme, you can add as many as you’d like. I always start with ‘base’. My default libraries file looks like this:</p>\n<p>{% highlight yaml linenos %}\nbase:\nversion: VERSION\ncss:\ntheme:\nassets/css/styles.css: {}\njs:\nassets/js/tappy.js: {}\nassets/js/scripts.js: {}\n{% endhighlight %}</p>\n<p>Once you’ve defined the library, you’re able to add it in your info yaml file. Open up <code class=\"language-text\">[MY_THEME].info.yml</code> and add:</p>\n<p>{% highlight yaml startinline=true linenos %}\nlibraries:</p>\n<ul>\n<li>[MY_THEME]/base\n{% endhighlight %}</li>\n</ul>\n<p>Make sure this [MY_THEME] is lowercase. Also, if you want to use the core jQuery or Drupal libraries you have to include these in your theme as well. Drupal no longer slaps these in by default. So your info yaml file becomes:</p>\n<p>{% highlight yaml startinline=true linenos %}\nlibraries:</p>\n<ul>\n<li>core/jquery</li>\n<li>core/drupal</li>\n<li>[MY_THEME]/base\n{% endhighlight %}</li>\n</ul>\n<h2>Template suggestions and preprocess functions</h2>\n<p>Instead of a template.php file, themes now use [MY_THEME].theme files. Here you’ll find the recognizable preprocess functions. Alongside of them is new theme suggestion functions. HOOK<em>theme</em>suggestions<em>HOOK</em>alter() where the first hook is your theme name, and the second is Drupal layer being targeted. Page, node, block, field, etc. By leveraging these new functions we can add to the template suggestions of our entities and data.</p>\n<p>{% highlight php startinline=true linenos %}\nfunction MY<em>THEME</em>theme<em>suggestions</em>node<em>alter($&#x26;suggestions, &#x26;$vars) {\n// custom logic\n$suggestions[] = ‘node\\</em>_custom-template’;\n}\n{% endhighlight %}</p>\n<h2>More to come soon!</h2>\n<p>This was a simple and straight forward post to help you get started on a custom theme. More posts with examples coming soon!</p>","frontmatter":{"title":"Getting started with Drupal 8 Theming","date":"Invalid date"}}},"pageContext":{"slug":"/blog/NaN/NaN/NaN/getting-started-with-drupal-8-theming/","previous":{"fields":{"slug":"/blog/NaN/NaN/NaN/inline-critical-css-using-jekyll-and-gulp/"},"frontmatter":{"title":"Inline your critical CSS using Jekyll and Gulp"}},"next":{"fields":{"slug":"/blog/NaN/NaN/NaN/printing-entity-reference-field-programmatically-drupal-8/"},"frontmatter":{"title":"Printing an Entity Reference field programmatically in Drupal 8"}}}}